@model DemoApplication.ViewModels.CartItemViewModel
@using DemoApplication.Areas.Identity.Data;
@inject Microsoft.AspNetCore.Identity.UserManager<DemoApplicationUser> _userManager;
@{
    var p = ViewData["product"] as Product;
    ViewData["Title"] = "Product Detail - " + p.Name;
}

<div class="container">
    <div class="row">

        <div class="col-md-5 border-right py-3">
            <article>
                <div class="img-big-wrap">
                    <div class="img-zoom-container">
                        <img src="~/@p.Image" /> 
                    </div>
                </div>
            </article>

        </div>
        <div class="col-md-7 py-3" style="padding-left: 50px">
            <h3 class="product-title">
                @p.Name
            </h3>
            <p class="product-description">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <a href="#">99 đánh giá</a>
                <br>
                @p.Description
            </p>
            <h4 class="price">
                Giá hiện tại: <span style="color:red;">@String.Format("{0:0,00}", p.Price)</span>
            </h4>
            <p class="vote">
                2 KHUYẾN MÃI<br>
                <i class="fa fa-check-circle"></i>Giảm ngay 1 triệu <br>
                <i class="fa fa-check-circle"></i>Giảm ngay 1.500.000đ khi thanh toán Online bằng thẻ Mastercard (Từ 01/05 - 31/05)<br>
                * Không áp dụng khi mua trả góp 0%
            </p>
            <form method="post" asp-controller="Cart" asp-action="AddToCart">
                <input type="number" placeholder="nhập số lượng" value="1" name="qty"/>
                <input type="hidden" value="@p.Id" name="productId"/>
                <button type="submit" class="btn btn-success">Add To Cart</button>
            </form>
        </div>
    </div>
</div>
<div class="container">
    <hr width="100%" />
    <div class="row">
        <div class="col-md-7 py-3">
            <div class="col-md-12">
                <h3>Giới thiệu sản phẩm</h3>
            </div>
            <div id="demo" class="carousel slide" data-ride="carousel">
                <ul class="carousel-indicators">
                    <li data-target="#demo" data-slide-to="0" class="active"></li>
                    <li data-target="#demo" data-slide-to="1"></li>
                    <li data-target="#demo" data-slide-to="2"></li>
                    <li data-target="#demo" data-slide-to="3"></li>
                    <li data-target="#demo" data-slide-to="4"></li>
                    <li data-target="#demo" data-slide-to="5"></li>
                    <li data-target="#demo" data-slide-to="6"></li>
                    <li data-target="#demo" data-slide-to="7"></li>
                    <li data-target="#demo" data-slide-to="8"></li>
                </ul>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="~/image/x1.png" alt="Los Angeles" width="100%" height="100%">
                    </div>
                    <div class="carousel-item">
                        <img src="~/image/x2.png" alt="Chicago" width="100%" height="100%">
                    </div>
                    <div class="carousel-item">
                        <img src="~/image/x3.png" alt="New York" width="100%" height="100%">
                    </div>
                    <div class="carousel-item">
                        <img src="~/image/x4.png" alt="New York" width="100%" height="100%">
                    </div>
                    <div class="carousel-item">
                        <img src="~/image/x5.png" alt="New York" width="100%" height="100%">
                    </div>
                    <div class="carousel-item">
                        <img src="~/image/x6.png" alt="New York" width="100%" height="100%">
                    </div>
                    <div class="carousel-item">
                        <img src="~/image/x7.png" alt="New York" width="100%" height="100%">
                    </div>
                    <div class="carousel-item">
                        <img src="~/image/x8.png" alt="New York" width="100%" height="100%">
                    </div>
                    <div class="carousel-item">
                        <img src="~/image/x9.png" alt="New York" width="100%" height="100%">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#demo" data-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </a>
                <a class="carousel-control-next" href="#demo" data-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </a>
            </div>

            <div class="col-md-12">



            </div>
        </div>
        <div class="col-md-5 py-3">
            <div class="row">
                <div class="col-md-12">
                    <h3>Thông số kỹ thuật</h3>
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    Màn hình:
                </div>
                <div class="col-sm-8">
                    OLED, 5.8", Super Retina
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    Hệ điều hành:
                </div>
                <div class="col-sm-8">
                    iOS 11
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    Camera sau:
                </div>
                <div class="col-sm-8">
                    2 camera 12 MP
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    Camera trước:
                </div>
                <div class="col-sm-8">
                    7 MP
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    CPU:
                </div>
                <div class="col-sm-8">
                    Apple A11 Bionic 6 nhân
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    RAM:
                </div>
                <div class="col-sm-8">
                    3 GB
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    Bộ nhớ trong:
                </div>
                <div class="col-sm-8">
                    256 GB
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    Thẻ SIM:
                </div>
                <div class="col-sm-8">
                    1 Nano SIM, Hỗ trợ 4G
                </div>
                <hr width="90%" />
                <div class="col-sm-4">
                    Dung lượng pin:
                </div> 
                <div class="col-sm-8">
                    2716 mAh, có sạc nhanh
                </div>
            </div>
        </div>
    </div>
</div>
<hr width="90%" />
<div class="container">
    <div class="row">
        <div class="col-md-12 py-3">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#menu1">Nhận xét</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#menu2">Danh sách bình luận</a>
                </li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                @if(User.Identity.IsAuthenticated)
                {
                    <div id="menu1" class="container tab-pane active">
                        <br>
                        <form method="post" asp-controller="Home" asp-action="SendComment">
                            <div class="form-group">
                                <label for="comment"><h4>Comments:</h4></label>
                                <textarea id="comment" name="text" class="form-control" rows="4" placeholder="Write a comment..."></textarea><br />
                                <input type="hidden" name="productId" value="@p.Id" />
                                <input type="hidden" name="userId" value="@_userManager.GetUserId(User)" />
                                <input type="hidden" name="userName" value="@_userManager.GetUserName(User)" />
                                <button type="submit" class="btn btn-dark">Send</button>
                            </div>
                        </form>
                    </div>
                } else { <h5>Please Login to Comment </h5> }
                
                <div id="menu2" class="container tab-pane fade">
                    <br>
                    @if (ViewData["comment"] != null)
                    {
                        @foreach (var c in ViewData["comment"] as List<Comment>)
                        {
                            <div class="media">
                                <a href="#" class="pull-left">
                                    <img src="image/avt.png" class="media-photo img-circle" width="64px" height="64px">
                                </a>

                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<div class="media-body">
                                    <span class="media-meta pull-right">3 giờ trước</span>
                                    <h4 class="title">@c.UserName</h4>
                                    <p class="summary">
                                        @c.Text
                                    </p>
                                </div>
                            </div>
                        }
                    }
                    else { <h5>No Comments.</h5> }
                </div>
            </div>
        </div>
    </div>
</div>